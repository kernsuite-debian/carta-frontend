!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=2)}([function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,f=[],c=!1,l=-1;function p(){c&&s&&(c=!1,s.length?f=s.concat(f):l=-1,f.length&&d())}function d(){if(!c){var e=u(p);c=!0;for(var t=f.length;t;){for(s=f,f=[];++l<t;)s&&s[l].run();l=-1,t=f.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new m(e,t)),1!==f.length||c||u(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return(a?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===a(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),o=r(n.split("/")),i=Math.min(a.length,o.length),u=i,s=0;s<i;s++)if(a[s]!==o[s]){u=s;break}var f=[];for(s=u;s<a.length;s++)f.push("..");return(f=f.concat(o.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!a){r=o;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,o=0,i=e.length-1;i>=0;--i){var u=e.charCodeAt(i);if(47!==u)-1===r&&(a=!1,r=i+1),46===u?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){n=i+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(0))},function(e,t,n){(function(t,r){var a="undefined"!==typeof a?a:{};a.locateFile=function(e,t){return"./"+e};var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var u=[],s=!1,f=!1,c=!1,l=!1;s="object"===typeof window,f="function"===typeof importScripts,c="object"===typeof t&&"object"===typeof t.versions&&"string"===typeof t.versions.node,l=!s&&!c&&!f;var p,d,m,y,h,b="";function g(e){return a.locateFile?a.locateFile(e,b):b+e}c?(b=f?n(1).dirname(b)+"/":r+"/",p=function(e,t){return y||(y=n(3)),h||(h=n(1)),e=h.normalize(e),y.readFileSync(e,t?null:"utf8")},m=function(e){var t=p(e,!0);return t.buffer||(t=new Uint8Array(t)),P(t.buffer),t},t.argv.length>1&&t.argv[1].replace(/\\/g,"/"),u=t.argv.slice(2),e.exports=a,t.on("uncaughtException",(function(e){if(!(e instanceof Ae))throw e})),t.on("unhandledRejection",ee),function(e){t.exit(e)},a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(p=function(e){return read(e)}),m=function(e){var t;return"function"===typeof readbuffer?new Uint8Array(readbuffer(e)):(P("object"===typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?u=scriptArgs:"undefined"!=typeof arguments&&(u=arguments),"function"===typeof quit&&function(e){quit(e)},"undefined"!==typeof print&&("undefined"===typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!==typeof printErr?printErr:print)):(s||f)&&(f?b=self.location.href:"undefined"!==typeof document&&document.currentScript&&(b=document.currentScript.src),b=0!==b.indexOf("blob:")?b.substr(0,b.lastIndexOf("/")+1):"",p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});a.print||console.log.bind(console);var v=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&(u=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit;var w;a.wasmBinary&&(w=a.wasmBinary);var A;a.noExitRuntime;"object"!==typeof WebAssembly&&ee("no native wasm support detected");var _=!1;function P(e,t){e||ee("Assertion failed: "+t)}function H(e){var t=a["_"+e];return P(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function T(e,t,n,r,a){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);R(e,t=we(n),n)}return t},array:function(e){var t=we(e.length);return C(e,t),t}};var i=H(e),u=[],s=0;if(r)for(var f=0;f<r.length;f++){var c=o[n[f]];c?(0===s&&(s=ge()),u[f]=c(r[f])):u[f]=r[f]}var l=i.apply(null,u);return l=function(e){return"string"===t?k(e):"boolean"===t?Boolean(e):e}(l),0!==s&&ve(s),l}function U(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?H(e):function(){return T(e,t,n,arguments)}}var D="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&D)return D.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var u=63&e[t++];if(192!=(224&i)){var s=63&e[t++];if((i=224==(240&i)?(15&i)<<12|u<<6|s:(7&i)<<18|u<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var f=i-65536;o+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else o+=String.fromCharCode((31&i)<<6|u)}else o+=String.fromCharCode(i)}return o}function k(e,t){return e?E(S,e,t):""}function x(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((1023&u)<<10)|1023&e.charCodeAt(++i);if(u<=127){if(n>=o)break;t[n++]=u}else if(u<=2047){if(n+1>=o)break;t[n++]=192|u>>6,t[n++]=128|63&u}else if(u<=65535){if(n+2>=o)break;t[n++]=224|u>>12,t[n++]=128|u>>6&63,t[n++]=128|63&u}else{if(n+3>=o)break;t[n++]=240|u>>18,t[n++]=128|u>>12&63,t[n++]=128|u>>6&63,t[n++]=128|63&u}}return t[n]=0,n-a}function R(e,t,n){return x(e,S,t,n)}var B,O,S;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function C(e,t){O.set(e,t)}function M(e,t){return e%t>0&&(e+=t-e%t),e}function F(e){B=e,a.HEAP8=O=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=S=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var I,j=[],W=[],L=[],z=[];function q(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)Z(a.preRun.shift());ce(j)}function G(){!0,ce(W)}function N(){ce(L)}function X(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)K(a.postRun.shift());ce(z)}function Z(e){j.unshift(e)}function K(e){z.unshift(e)}W.push({func:function(){be()}});var Y=0,J=null,Q=null;function V(e){Y++,a.monitorRunDependencies&&a.monitorRunDependencies(Y)}function $(e){if(Y--,a.monitorRunDependencies&&a.monitorRunDependencies(Y),0==Y&&(null!==J&&(clearInterval(J),J=null),Q)){var t=Q;Q=null,t()}}function ee(e){throw a.onAbort&&a.onAbort(e),v(e+=""),_=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function te(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};var ne="data:application/octet-stream;base64,";function re(e){return te(e,ne)}var ae="file://";function oe(e){return te(e,ae)}var ie="zfp_wrapper.wasm";function ue(e){try{if(e==ie&&w)return new Uint8Array(w);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}catch(v){ee(v)}}function se(){if(!w&&(s||f)){if("function"===typeof fetch&&!oe(ie))return fetch(ie,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ie+"'";return e.arrayBuffer()})).catch((function(){return ue(ie)}));if(d)return new Promise((function(e,t){d(ie,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ue(ie)}))}function fe(){var e={env:he,wasi_snapshot_preview1:he};function t(e,t){var n=e.exports;a.asm=n,F((A=a.asm.memory).buffer),I=a.asm.__indirect_function_table,$()}function n(e){t(e.instance)}function r(t){return se().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){v("failed to asynchronously prepare wasm: "+e),ee(e)}))}if(V(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(o){return v("Module.instantiateWasm callback failed with error: "+o),!1}return w||"function"!==typeof WebAssembly.instantiateStreaming||re(ie)||oe(ie)||"function"!==typeof fetch?r(n):fetch(ie,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),r(n)}))})),{}}function ce(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?I.get(n)():I.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function le(e,t,n){S.copyWithin(e,t,t+n)}function pe(){return S.length}function de(e){try{return A.grow(e-B.byteLength+65535>>>16),F(A.buffer),1}catch(t){}}function me(e){var t=pe(),n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),de(Math.min(n,M(Math.max(e,a),65536))))return!0}return!1}re(ie)||(ie=g(ie));var ye,he={emscripten_memcpy_big:le,emscripten_resize_heap:me},be=(fe(),a.___wasm_call_ctors=function(){return(be=a.___wasm_call_ctors=a.asm.__wasm_call_ctors).apply(null,arguments)}),ge=(a._zfpDecompress=function(){return(a._zfpDecompress=a.asm.zfpDecompress).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.malloc).apply(null,arguments)},a._free=function(){return(a._free=a.asm.free).apply(null,arguments)},a.___errno_location=function(){return(a.___errno_location=a.asm.__errno_location).apply(null,arguments)},a.stackSave=function(){return(ge=a.stackSave=a.asm.stackSave).apply(null,arguments)}),ve=a.stackRestore=function(){return(ve=a.stackRestore=a.asm.stackRestore).apply(null,arguments)},we=a.stackAlloc=function(){return(we=a.stackAlloc=a.asm.stackAlloc).apply(null,arguments)};function Ae(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function _e(e){function t(){ye||(ye=!0,a.calledRun=!0,_||(G(),N(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),X()))}e=e||u,Y>0||(q(),Y>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(a.ccall=T,a.cwrap=U,Q=function e(){ye||_e(),ye||(Q=e)},a.run=_e,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();_e();var Pe=self,He=3402823466e29;a.nDataBytes=4e6,a.nDataBytesCompressed=1e6,a.dataPtr=null,a.dataHeap=null,a.resultFloat=null,a.dataPtrUint=null,a.dataHeapUint=null,a.debugOutput=!1,a.id=-1;var Te=a.cwrap("zfpDecompress","number",["number","number","number","number","number","number"]);K((function(){a.nDataBytes=4e6,a.nDataBytesCompressed=1e6,a.dataPtr=a._malloc(a.nDataBytes),a.dataHeap=new Uint8Array(a.HEAPU8.buffer,a.dataPtr,a.nDataBytes),a.resultFloat=new Float32Array(a.dataHeap.buffer,a.dataHeap.byteOffset,a.nDataBytes/4),a.dataPtrUint=a._malloc(a.nDataBytesCompressed),a.dataHeapUint=new Uint8Array(a.HEAPU8.buffer,a.dataPtrUint,a.nDataBytesCompressed),Pe.postMessage(["ready"])})),a.zfpDecompressUint8WASM=function(e,t,n,r,o){var i=n*r*4;(!a.dataPtr||i>a.nDataBytes)&&(a.dataHeap&&a._free(a.dataHeap.byteOffset),a.nDataBytes=i,a.dataPtr=a._malloc(a.nDataBytes),a.dataHeap=new Uint8Array(a.HEAPU8.buffer,a.dataPtr,a.nDataBytes),a.debugOutput&&console.log("ZFP Worker "+a.id+" allocating new uncompressed buffer ("+a.nDataBytes/1e3+" KB)"),a.resultFloat=new Float32Array(a.dataHeap.buffer,a.dataHeap.byteOffset,n*r));var u=e.length;return(!a.dataPtrUint||u>a.nDataBytesCompressed)&&(a.dataHeapUint&&a._free(a.dataHeapUint.byteOffset),a.nDataBytesCompressed=u,a.dataPtrUint=a._malloc(a.nDataBytesCompressed),a.dataHeapUint=new Uint8Array(a.HEAPU8.buffer,a.dataPtrUint,a.nDataBytesCompressed),a.debugOutput&&console.log("ZFP Worker "+a.id+" allocating new compressed buffer ("+a.nDataBytesCompressed/1e3+" KB)")),a.dataHeapUint.set(new Uint8Array(e.buffer,e.byteOffset,t)),Te(Math.floor(o),a.dataHeap.byteOffset,n,r,a.dataHeapUint.byteOffset,t),new Float32Array(a.resultFloat.buffer,a.resultFloat.byteOffset,n*r)},Pe.onmessage=function(e){if(e.data&&Array.isArray(e.data)&&e.data.length>1){var t=e.data[0];if("debug"===t&&(a.debugOutput=e.data[1]),"setid"===t)a.id=e.data[1];else if("decompress"===t){var n=e.data[2],r=new Uint8Array(e.data[1],0,n.subsetLength);a.debugOutput&&performance.mark("decompressStart");var o=a.zfpDecompressUint8WASM(r,n.subsetLength,n.width,n.subsetHeight,n.compression);a.debugOutput&&performance.mark("decompressEnd");var i=new Float32Array(e.data[1],0,n.width*n.subsetHeight);i.set(o);for(var u=0,s=!1,f=0,c=n.nanEncodings;f<c.length;f++){var l=c[f];s&&i.fill(-He,u,u+l),s=!s,u+=l}if(Pe.postMessage(["decompress",e.data[1],{width:n.width,subsetHeight:n.subsetHeight,subsetLength:n.subsetLength,requestId:n.requestId,tileCoordinate:n.tileCoordinate,layer:n.layer,fileId:n.fileId,channel:n.channel,stokes:n.stokes}],[e.data[1]]),a.debugOutput){performance.measure("dtDecompress","decompressStart","decompressEnd");var p=performance.getEntriesByName("dtDecompress")[0].duration;performance.clearMarks(),performance.clearMeasures();var d=4e-6*n.width*n.subsetHeight;setTimeout((function(){console.log("ZFP Worker "+a.id+" decompressed "+d.toFixed(2)+" MB in "+p.toFixed(2)+" ms at "+(1e3*d/p).toFixed(2)+" MB/s ("+(1e3*d/p/4).toFixed(2)+" Mpix/s)")}),100)}}}},e.exports=a}).call(this,n(0),"/")},function(e,t){}]);